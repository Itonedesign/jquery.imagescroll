(function(f){f.fn.imagescroll=function(J){var ia={color:"#000000",image_src:"",load:function(){},auto_resize:!0,resize:function(){},zoom_reset:"",zoom_in:"",zoom_out:""},w=1E3/60,U=0.08,V=500,W=40,ja=500,K=0.02,D="ontouchstart"in window,z=window.devicePixelRatio;void 0==z&&(z=1);var ka=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(f){window.setTimeout(f,w)}}(),
X=1,Y=2,Z=4,$=8,ha=function(){return this.each(function(ha){function L(a,b){E=a;F=b;c=E*z;k=F*z;t.setAttribute("width",c);t.setAttribute("height",k);f(t).width(E);f(t).height(F)}function G(a,b){var h=(b-u)/d+l;m=(a-v)/d+m;l=h;v=a;u=b}function aa(){v=c/2;u=k/2;m=e.width/2;l=e.height/2;A=d=1*e.width/e.height>1*c/k?k/e.height:c/e.width;M=Math.max(A,4)}function N(){var a=0,b=v/d,h=u/d,f=(c-v)/d,g=(k-u)/d;0>m-b&&(m=b,a+=X);m+f>e.width&&(m=e.width-f,a+=Y);0>l-h&&(l=h,a+=Z);l+g>e.height&&(l=e.height-g,a+=
$);return a}function ba(a){return"touchmove"==a.type||"touchstart"==a.type?(a=a.originalEvent.changedTouches[0],{x:a.clientX,y:a.clientY}):"mousedown"==a.type||"mousemove"==a.type?{x:a.pageX,y:a.pageY}:{x:-1,y:-1}}function H(a){a.preventDefault();a.stopPropagation()}function x(a){a.preventDefault();a.stopPropagation();switch(a.type){case "touchstart":case "mousedown":if(0<=r)break;G(c/2,k/2);(function(){var b=ba(a);r=b.x;y=b.y;O=r;P=y;I=a.timeStamp;g=p=q=0})();break;case "touchmove":case "mousemove":if(0>
r)break;(function(){g=p=q=0;var b=ba(a),h=b.x-r,f=b.y-y;r=b.x;y=b.y;m-=h/d;l-=f/d;N()})();break;case "touchend":case "mouseup":case "mouseout":if(0>r)break;(function(){var b,h;b=r-O;h=y-P;var e=Math.sqrt(b*b+h*h),c=a.timeStamp-I;c<V&&e>W?(q=b/c,p=h/c,g=0):c<V&&e<W?(g=g=p=q=0,Q&&a.timeStamp-R<ja?(Q=!1,R=0,b=O,h=P,c=f(t),e=c.offset().left,c=c.offset().top,b-=e,h-=c,e=(b-v)/d+m,c=(h-u)/d+l,v=b,u=h,m=e,l=c,p=q=0,g=K/2/w,y=r=-1,I=0):(Q=!0,R=a.timeStamp)):g=p=q=0;y=r=-1;I=0})()}}function ca(a){a.preventDefault();
a.stopPropagation();if("touchend"==a.type||"mouseup"==a.type||"mouseout"==a.type)G(c/2,k/2),d=Math.max(A,1),g=0}function B(a){a.preventDefault();a.stopPropagation();if("touchstart"==a.type||"mousedown"==a.type)G(c/2,k/2),g=K/w;if("touchend"==a.type||"mouseup"==a.type||"mouseout"==a.type)g=0}function C(a){a.preventDefault();a.stopPropagation();if("touchstart"==a.type||"mousedown"==a.type)G(c/2,k/2),g=-1*K/w;if("touchend"==a.type||"mouseup"==a.type||"mouseout"==a.type)g=0}function S(){q&&(m-=q*w);p&&
(l-=p*w);var a=N();if(q||p)q=a&X||a&Y?0:q-q*U,p=a&Z||a&$?0:p-p*U;g&&(d+=g*w,d>M&&(d=M,g=0),d<A&&(d=A,g=0));N();var a=Math.min(Math.max(m-v/d,0),e.width-c/d),b=Math.min(Math.max(l-u/d,0),e.height-k/d),f=Math.min(c/d,e.width),n=Math.min(k/d,e.height);try{T.drawImage(e,a,b,f,n,0,0,c,k)}catch(r){}}function da(){L(1,1)}function ea(){L(s.width(),s.height());fa&&(aa(),S())}function ga(){da();n.resize();ea()}var s=f(this),n=f.extend(ia,J),E=s.width(),F=s.height(),c=E*z,k=F*z,d=0.5,fa=!1,m=0,l=0,v=c/2,u=k/
2,q=0,p=0,g=0,A=0.25,M=1,r=-1,y=-1,O=-1,P=-1,I=0,R=0,Q=!1,t=document.createElement("canvas"),T=t.getContext("2d");L(s.width(),s.height());T.fillStyle=n.color;T.fillRect(0,0,c,k);s.append(t);var e=new Image;e.src=n.image_src;e.addEventListener("load",function(){fa=!0;aa();var a=f(t);D?(a.bind("touchstart",x),a.bind("touchmove",x),a.bind("touchend",x)):(a.bind("mousedown",x),a.bind("mousemove",x),a.bind("mouseout",x),a.bind("mouseup",x));a.bind("click",H);a.bind("dblclick",H);n.zoom_reset&&(a=f("#"+
n.zoom_reset),D?a.bind("touchend",ca):a.bind("mouseup",ca));n.zoom_in&&(a=f("#"+n.zoom_in),D?(a.bind("touchstart",B),a.bind("touchend",B)):(a.bind("mousedown",B),a.bind("mouseup",B),a.bind("mouseout",B)),a.bind("click",H));n.zoom_out&&(a=f("#"+n.zoom_out),D?(a.bind("touchstart",C),a.bind("touchend",C)):(a.bind("mousedown",C),a.bind("mouseup",C),a.bind("mouseout",C)),a.bind("click",H));(function h(){S();ka(h)})();S();n.load()},!1);s.bind("minimun",da);s.bind("maximum",ea);n.auto_resize&&(f(window).bind("resize",
ga),f(window).bind("orientationchange",ga));return this})},la=function(){f(this).trigger("maximum")};return"minimum"==J?function(){f(this).trigger("minimum")}.apply(this):"maximum"==J?la.apply(this):ha.apply(this)}})(jQuery);
